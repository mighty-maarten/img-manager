# ============================================================================
# IMG Manager Monorepo Environment Configuration
# ============================================================================
# This file contains all environment variables for both client and API packages.
# Copy this file to .env.local and fill in the appropriate values.
#
# For local development:
#   - Use localhost for database host
#   - Set APP_IS_CLOUD=false
#   - Use local file storage
#
# For EC2 deployment:
#   - Use localhost for database host (co-located PostgreSQL)
#   - Set APP_IS_CLOUD=true
#   - Use S3 for file storage
# ============================================================================

# ============================================================================
# CLIENT CONFIGURATION (packages/client)
# ============================================================================
# All client environment variables must be prefixed with VITE_ to be injected
# at build time by Vite.

# API URL - The base URL for API requests
# Local development: http://localhost:3000/api
# Production: https://yourdomain.com/api
VITE_API_URL=http://localhost:3000/api

# Local development flag
# Set to true for local development, false for production
VITE_IS_LOCAL=true

# ============================================================================
# API CONFIGURATION (packages/api)
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------

# Node environment (local, development, production)
NODE_ENV=local

# Application port (default: 3000)
APP_PORT=3000

# Allowed CORS origins (comma-separated)
# Local development: http://localhost:5173
# Production: https://yourdomain.com
APP_ALLOWED_ORIGINS=http://localhost:5173

# Allow database setup operations (true for local, false for production)
APP_ALLOW_DATABASE_SETUP=true

# Cloud deployment flag (false for local, true for EC2/cloud)
APP_IS_CLOUD=false

# CloudWatch log group name (required even for local, can be placeholder)
APP_CLOUDWATCH_LOG_GROUP_NAME=img-manager-local

# SNS error topic ARN (required even for local, can be placeholder)
APP_SNS_ERROR_TOPIC_ARN=arn:aws:sns:region:account:topic

# Local storage path for uploaded images (used when APP_IS_CLOUD=false)
# Example: /Users/username/img-manager/packages/api/storage
APP_LOCAL_STORAGE_PATH=/path/to/storage

# S3 bucket name for assets (used when APP_IS_CLOUD=true)
APP_ASSETS_BUCKET_NAME=img-manager-assets

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------

# Database host
# Local development: localhost (Docker Compose PostgreSQL)
# EC2 deployment: localhost (co-located PostgreSQL)
# RDS deployment (legacy): <rds-endpoint>.region.rds.amazonaws.com
DATABASE_HOST=localhost

# Database port (default: 5432)
DATABASE_PORT=5432

# Database username
# Local development: admin
# EC2 deployment: img_manager_user
DATABASE_USERNAME=admin

# Database password
# Local development: admin
# EC2 deployment: <secure-password>
DATABASE_PASSWORD=admin

# Database name
# Local development: img_manager_db_env
# EC2 deployment: img_manager
DATABASE_NAME=img_manager_db_env

# Database SSL (true for RDS, false for local/EC2)
DATABASE_SSL=false

# ----------------------------------------------------------------------------
# JWT Configuration
# ----------------------------------------------------------------------------

# JWT secret key (CHANGE THIS IN PRODUCTION!)
JWT_SECRET=your-secret-key-change-this-in-production

# JWT token expiration time (e.g., 1h, 24h, 7d)
JWT_EXPIRES_IN=1h

# ============================================================================
# DEPLOYMENT-SPECIFIC CONFIGURATIONS
# ============================================================================

# ----------------------------------------------------------------------------
# Local Development Configuration
# ----------------------------------------------------------------------------
# Use these settings when running locally with Docker Compose:
#
# NODE_ENV=local
# APP_IS_CLOUD=false
# APP_ALLOW_DATABASE_SETUP=true
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_USERNAME=admin
# DATABASE_PASSWORD=admin
# DATABASE_NAME=img_manager_db_env
# DATABASE_SSL=false
# APP_LOCAL_STORAGE_PATH=/path/to/local/storage
# VITE_API_URL=http://localhost:3000/api
# VITE_IS_LOCAL=true

# ----------------------------------------------------------------------------
# EC2 Deployment Configuration
# ----------------------------------------------------------------------------
# Use these settings when deploying to EC2 with co-located PostgreSQL:
#
# NODE_ENV=production
# APP_IS_CLOUD=true
# APP_ALLOW_DATABASE_SETUP=false
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_USERNAME=img_manager_user
# DATABASE_PASSWORD=<secure-password-from-secrets-manager>
# DATABASE_NAME=img_manager
# DATABASE_SSL=false
# APP_ASSETS_BUCKET_NAME=img-manager-assets-prod
# APP_CLOUDWATCH_LOG_GROUP_NAME=img-manager-prod
# APP_SNS_ERROR_TOPIC_ARN=arn:aws:sns:region:account:img-manager-errors
# VITE_API_URL=https://yourdomain.com/api
# VITE_IS_LOCAL=false

# ----------------------------------------------------------------------------
# RDS Deployment Configuration (Legacy)
# ----------------------------------------------------------------------------
# Use these settings when deploying with RDS (not recommended for new deployments):
#
# NODE_ENV=production
# APP_IS_CLOUD=true
# DATABASE_HOST=<rds-endpoint>.region.rds.amazonaws.com
# DATABASE_PORT=5432
# DATABASE_USERNAME=<rds-username>
# DATABASE_PASSWORD=<rds-password>
# DATABASE_NAME=img_manager
# DATABASE_SSL=true
